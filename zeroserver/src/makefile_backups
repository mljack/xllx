CC = gcc
LIBS = -lev -lpthread
OPTFLAGS = -g
CFLAGS = -Wall $(OPTFLAGS) -L/usr/local/lib

OBJS =  htpcos_server

all: $(OBJS)

htpcos_server: htpcos_server.o zero_server.o zero_thread.o zero_queue.o
	$(CC) -o htpcos_server $(CFLAGS) htpcos_server.o zero_server.o zero_thread.o zero_queue.o  $(LIBS)

htpcos_server.o: htpcos_server.c zero_server.h zero_common.h
	$(CC) -c htpcos_server.c 

zero_server.o: zero_server.c zero_thread.c zero_server.h zero_common.h zero_thread.h
	$(CC) -c zero_server.c

zero_thread.o: zero_thread.c zero_queue.c zero_thread.h zero_queue.h zero_common.h
	$(CC) -c zero_thread.c

zero_queue.o: zero_queue.c zero_queue.h zero_common.h
	$(CC) -c zero_queue.c

.PHONY : clean
clean:
	-rm htpcos_server *.o
